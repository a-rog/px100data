<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Mon Aug 10 17:21:05 PDT 2015 -->
<title>InMemoryDatabase</title>
<meta name="date" content="2015-08-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InMemoryDatabase";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":9,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/px100systems/data/core/Index.html" title="annotation in com.px100systems.data.core"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/px100systems/data/core/InMemoryDatabase.DataStorageEvents.html" title="interface in com.px100systems.data.core"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/px100systems/data/core/InMemoryDatabase.html" target="_top">Frames</a></li>
<li><a href="InMemoryDatabase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.px100systems.data.core</div>
<h2 title="Class InMemoryDatabase" class="title">Class InMemoryDatabase</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">com.px100systems.data.core.DatabaseStorage</a></li>
<li>
<ul class="inheritance">
<li>com.px100systems.data.core.InMemoryDatabase</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.springframework.beans.factory.DisposableBean, org.springframework.beans.factory.InitializingBean</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">InMemoryDatabase</span>
extends <a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></pre>
<div class="block">In-memory database with optional write-behind<br>
 <br>
 This API wrapper encapsulates distributed in-memory storage implemented by InMemoryStorageProvider with an optional write-behind persistence server.<br>
 The general architecture is flat: multiple Web-servers collocated with in-memory storage collocated with optional persistence servers.<br>
 <br>
 In case of low risk tolerance (e.g. government standards) the following actions can be taken:<br>
 1. Add more redundancy on cheap hardware (if the client accepts/supplies it and can ensure the proper maintenance)<br>
 2. More frequent write-behinds: even one-minute ones that gets close to write-through frequencey is still faster than conventional disk persistence
    because the data is cached in memory and the system is read-mostly.<br>
 3. In the worst case (no risk allowed at all) write-through can be used - still faster than traditional SQL databases.<br>
 <br>
 Generally all members of the cluster are supposed to be running "forever": between cold cluster restarts due to periodic releases
 or hot starts (joining the running cluster) after the member crash.<br>
 <br>
 InMemoryDatabase and JCache: we don't use JCache spec and don't leverage any (e.g. Ignite's) built-in persistence due to the following reasons:<br>
 1. Conceptually it is not a cache, so there are no read-through and other cache-specicifc operations.<br>
 2. When used as a data grid, all data entries need to be loaded for queries, etc.<br>
 3. JCache has no concept of redundant persister support: detecting stalled persistence, catching up, etc.<br>
 4. JCache has no concept of multi-process loading when different nodes load different entities<br>
 <br>
 Spring configuration:<br>
 Some parameters like persistenceServer are local, while some should be shared among all cluster members (persistence, maxPersistenceDelayHours, tenants, etc.).
 They should refer to beans defined in other config files residing in one shared directory (on a distributed file system)
 which is made part of the JVM/server's classpath just like the local "externalConfig" directory.<br>
 <br>
 <b>Configuration:</b><br>
 <ul>
   <li>persistence - persistence mode: Load (write-through) or Write-Behind. Write-Behind is not advised for "development mode",
   <li>maxPersistenceDelayHours - maximum period when the system detects that the write-behind persistence (if enabled) has stalled -
     no updates were made over that period since the last update time.
   <li>backupDirectory - directory to dump teh content of the cluster in case of automatic emergency shutdown (typically when the persistence stalled or manually invoked)
   <li>persistenceServer - persister, responsible at least for loading the database on startup. Can be null for non-persistent nodes (that don't load or write to the database).
     Not all nodes in teh claster need to have (collocated) persisters. However it is already collocated (specified in the RuntimeStorage config)
     in case of write-through, so it can (and should) be sued for loading as well.
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Alex Rogachevsky</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.DataStorageEvents.html" title="interface in com.px100systems.data.core">InMemoryDatabase.DataStorageEvents</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.Loader.html" title="class in com.px100systems.data.core">InMemoryDatabase.Loader</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.MessageHandler.html" title="class in com.px100systems.data.core">InMemoryDatabase.MessageHandler</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.PersistenceMode.html" title="enum in com.px100systems.data.core">InMemoryDatabase.PersistenceMode</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.px100systems.data.core.DatabaseStorage">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.px100systems.data.core.<a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></h3>
<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.EntityInfo.html" title="class in com.px100systems.data.core">DatabaseStorage.EntityInfo</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#InMemoryDatabase--">InMemoryDatabase</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#afterPropertiesSet--">afterPropertiesSet</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#afterSave-java.util.Date-java.util.List-java.util.List-java.util.List-java.util.List-">afterSave</a></span>(java.util.Date&nbsp;now,
         java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;allInserts,
         java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;allUpdates,
         java.util.List&lt;<a href="../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;&nbsp;deletes,
         java.util.List&lt;<a href="../../../../com/px100systems/data/core/InPlaceUpdate.html" title="class in com.px100systems.data.core">InPlaceUpdate</a>&lt;?&gt;&gt;&nbsp;inPlaceUpdates)</code>
<div class="block">Internal wite-behind implementation - relevant for data grids only, not traditional databases (Mongo).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#count-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-">count</a></span>(java.lang.String&nbsp;unitName,
     java.lang.Class&lt;?&gt;&nbsp;cls,
     <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria)</code>
<div class="block">Count entites matching some criteria or all if no criteria was specified.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../com/px100systems/data/plugin/persistence/PersistenceLogEntry.html" title="class in com.px100systems.data.plugin.persistence">PersistenceLogEntry</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#createPersistenceLogEntry--">createPersistenceLogEntry</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#emergencyShutdown--">emergencyShutdown</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#get-java.lang.String-java.lang.Class-java.lang.Long-">get</a></span>(java.lang.String&nbsp;unitName,
   java.lang.Class&lt;T&gt;&nbsp;cls,
   java.lang.Long&nbsp;id)</code>
<div class="block">Get entity by its Long ID.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/px100systems/data/plugin/storage/EntityCursor.html" title="interface in com.px100systems.data.plugin.storage">EntityCursor</a>&lt;<a href="../../../../com/px100systems/data/plugin/persistence/PersistenceLogEntry.html" title="class in com.px100systems.data.plugin.persistence">PersistenceLogEntry</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#getPersistenceLog-java.lang.Long-">getPersistenceLog</a></span>(java.lang.Long&nbsp;fromTime)</code>
<div class="block">Used internally by pesisters.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#getPersistenceRecord-java.lang.String-java.lang.Long-">getPersistenceRecord</a></span>(java.lang.String&nbsp;unitName,
                    java.lang.Long&nbsp;id)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#init-java.util.List-boolean-">init</a></span>(java.util.List&lt;<a href="../../../../com/px100systems/data/core/DatabaseStorage.EntityInfo.html" title="class in com.px100systems.data.core">DatabaseStorage.EntityInfo</a>&gt;&nbsp;entities,
    boolean&nbsp;initializeData)</code>
<div class="block">Internal method responsible for creating/syncing all entities and indexes on startup.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#isActive--">isActive</a></span>()</code>
<div class="block">Is the database active i.e.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../com/px100systems/data/core/InMemoryDatabase.Loader.html" title="class in com.px100systems.data.core">InMemoryDatabase.Loader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#loader--">loader</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#logSaveTime-java.lang.Long-">logSaveTime</a></span>(java.lang.Long&nbsp;time)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#persistenceStalled--">persistenceStalled</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#purgePersistenceLog-int-">purgePersistenceLog</a></span>(int&nbsp;hoursBeforeLastSave)</code>
<div class="block">Used internally by pesisters to cleanup (purge) the persistence log.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#readBackupFile-java.io.File-com.px100systems.data.plugin.persistence.PersistenceProvider-">readBackupFile</a></span>(java.io.File&nbsp;f,
              <a href="../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a>&nbsp;persister)</code>
<div class="block">Used by Restore utility.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#save-java.util.List-java.util.List-java.util.List-java.util.List-">save</a></span>(java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;inserts,
    java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;updates,
    java.util.List&lt;<a href="../../../../com/px100systems/data/core/Delete.html" title="class in com.px100systems.data.core">Delete</a>&gt;&nbsp;deletes,
    java.util.List&lt;<a href="../../../../com/px100systems/data/core/InPlaceUpdate.html" title="class in com.px100systems.data.core">InPlaceUpdate</a>&lt;?&gt;&gt;&nbsp;inPlaceUpdates)</code>
<div class="block">Saving the changes transactionally.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected &lt;T&gt;&nbsp;<a href="../../../../com/px100systems/data/plugin/storage/EntityCursor.html" title="interface in com.px100systems.data.plugin.storage">EntityCursor</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-">search</a></span>(java.lang.String&nbsp;unitName,
      java.lang.Class&lt;T&gt;&nbsp;cls,
      <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria,
      java.util.List&lt;java.lang.String&gt;&nbsp;orderBy)</code>
<div class="block">Query without a limit.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected &lt;T&gt;&nbsp;java.util.List&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-java.lang.Integer-">search</a></span>(java.lang.String&nbsp;unitName,
      java.lang.Class&lt;T&gt;&nbsp;cls,
      <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria,
      java.util.List&lt;java.lang.String&gt;&nbsp;orderBy,
      java.lang.Integer&nbsp;limit)</code>
<div class="block">Query with a limit.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#setBackupDirectory-java.lang.String-">setBackupDirectory</a></span>(java.lang.String&nbsp;backupDirectory)</code>
<div class="block">Directory to dump binary grid content in case of emregency server shutdown due to stalled persistence.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#setMaxPersistenceDelayHours-int-">setMaxPersistenceDelayHours</a></span>(int&nbsp;maxPersistenceDelayHours)</code>
<div class="block">Maximum period when the system detects that the write-behind persistence (if enabled) has stalled - no updates were made over that period since the last update time.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#setOutgoingEvents-com.px100systems.data.core.InMemoryDatabase.DataStorageEvents-">setOutgoingEvents</a></span>(<a href="../../../../com/px100systems/data/core/InMemoryDatabase.DataStorageEvents.html" title="interface in com.px100systems.data.core">InMemoryDatabase.DataStorageEvents</a>&nbsp;outgoingEvents)</code>
<div class="block">Critical events to monitor: emergency shutdown, etc.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#setPersistence-com.px100systems.data.core.InMemoryDatabase.PersistenceMode-">setPersistence</a></span>(<a href="../../../../com/px100systems/data/core/InMemoryDatabase.PersistenceMode.html" title="enum in com.px100systems.data.core">InMemoryDatabase.PersistenceMode</a>&nbsp;persistence)</code>
<div class="block">Persistence mode</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#setPersistenceServer-com.px100systems.data.plugin.persistence.DiskPersistence-">setPersistenceServer</a></span>(<a href="../../../../com/px100systems/data/plugin/persistence/DiskPersistence.html" title="class in com.px100systems.data.plugin.persistence">DiskPersistence</a>&nbsp;persistenceServer)</code>
<div class="block">Persister for loading and write-behind</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/px100systems/data/core/InMemoryDatabase.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Graceful shutdown - useless with write-through.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.px100systems.data.core.DatabaseStorage">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.px100systems.data.core.<a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></h3>
<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#destroy--">destroy</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#entityClass-java.lang.String-">entityClass</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#entityNames--">entityNames</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#getConfiguredEntities--">getConfiguredEntities</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#getRuntimeStorage--">getRuntimeStorage</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#getTenants--">getTenants</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#onNewTenant-com.px100systems.data.core.BaseTenantConfig-">onNewTenant</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#setBaseEntityPackages-java.util.List-">setBaseEntityPackages</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#setInitializer-com.px100systems.data.core.DbInitializer-">setInitializer</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#setRuntimeStorage-com.px100systems.data.core.RuntimeStorage-">setRuntimeStorage</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#setTenantLoader-com.px100systems.data.core.TenantLoader-">setTenantLoader</a>, <a href="../../../../com/px100systems/data/core/DatabaseStorage.html#transaction-java.lang.Integer-">transaction</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="InMemoryDatabase--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>InMemoryDatabase</h4>
<pre>public&nbsp;InMemoryDatabase()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setPersistence-com.px100systems.data.core.InMemoryDatabase.PersistenceMode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPersistence</h4>
<pre>public&nbsp;void&nbsp;setPersistence(<a href="../../../../com/px100systems/data/core/InMemoryDatabase.PersistenceMode.html" title="enum in com.px100systems.data.core">InMemoryDatabase.PersistenceMode</a>&nbsp;persistence)</pre>
<div class="block">Persistence mode</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistence</code> - persistence mode</dd>
</dl>
</li>
</ul>
<a name="setMaxPersistenceDelayHours-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxPersistenceDelayHours</h4>
<pre>public&nbsp;void&nbsp;setMaxPersistenceDelayHours(int&nbsp;maxPersistenceDelayHours)</pre>
<div class="block">Maximum period when the system detects that the write-behind persistence (if enabled) has stalled - no updates were made over that period since the last update time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxPersistenceDelayHours</code> - max delay in hours - typically 24 - one hour less than the persiter's log cleanup period</dd>
</dl>
</li>
</ul>
<a name="setBackupDirectory-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBackupDirectory</h4>
<pre>public&nbsp;void&nbsp;setBackupDirectory(java.lang.String&nbsp;backupDirectory)</pre>
<div class="block">Directory to dump binary grid content in case of emregency server shutdown due to stalled persistence.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>backupDirectory</code> - local server directory</dd>
</dl>
</li>
</ul>
<a name="setOutgoingEvents-com.px100systems.data.core.InMemoryDatabase.DataStorageEvents-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOutgoingEvents</h4>
<pre>public&nbsp;void&nbsp;setOutgoingEvents(<a href="../../../../com/px100systems/data/core/InMemoryDatabase.DataStorageEvents.html" title="interface in com.px100systems.data.core">InMemoryDatabase.DataStorageEvents</a>&nbsp;outgoingEvents)</pre>
<div class="block">Critical events to monitor: emergency shutdown, etc. (rarely used)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>outgoingEvents</code> - callback</dd>
</dl>
</li>
</ul>
<a name="isActive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isActive</h4>
<pre>public&nbsp;boolean&nbsp;isActive()</pre>
<div class="block">Is the database active i.e. not stopped and persistence not stalled</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#isActive--">isActive</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the database state</dd>
</dl>
</li>
</ul>
<a name="setPersistenceServer-com.px100systems.data.plugin.persistence.DiskPersistence-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPersistenceServer</h4>
<pre>public&nbsp;void&nbsp;setPersistenceServer(<a href="../../../../com/px100systems/data/plugin/persistence/DiskPersistence.html" title="class in com.px100systems.data.plugin.persistence">DiskPersistence</a>&nbsp;persistenceServer)</pre>
<div class="block">Persister for loading and write-behind</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceServer</code> - collocated persistence server aka "persister"</dd>
</dl>
</li>
</ul>
<a name="afterPropertiesSet--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterPropertiesSet</h4>
<pre>public&nbsp;void&nbsp;afterPropertiesSet()
                        throws java.lang.Exception</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>afterPropertiesSet</code>&nbsp;in interface&nbsp;<code>org.springframework.beans.factory.InitializingBean</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#afterPropertiesSet--">afterPropertiesSet</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="init-java.util.List-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(java.util.List&lt;<a href="../../../../com/px100systems/data/core/DatabaseStorage.EntityInfo.html" title="class in com.px100systems.data.core">DatabaseStorage.EntityInfo</a>&gt;&nbsp;entities,
                 boolean&nbsp;initializeData)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#init-java.util.List-boolean-">DatabaseStorage</a></code></span></div>
<div class="block">Internal method responsible for creating/syncing all entities and indexes on startup.
 initializeData is relevant for in-memory providers - tells it to reset the disk storage: recreate schemas, etc.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#init-java.util.List-boolean-">init</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>entities</code> - a list of recognized (scanned) entities with indexes and otehr metadata.</dd>
<dd><code>initializeData</code> - whether to wipe out the database.</dd>
</dl>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Graceful shutdown - useless with write-through. Makes sure the persisters persisted everything to the (relational) database.
 Always call it manually in Prod - hook on the Web App shutdown, not the Spring/JVM one</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#shutdown--">shutdown</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
</dl>
</li>
</ul>
<a name="get-java.lang.String-java.lang.Class-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>protected&nbsp;&lt;T&gt;&nbsp;T&nbsp;get(java.lang.String&nbsp;unitName,
                    java.lang.Class&lt;T&gt;&nbsp;cls,
                    java.lang.Long&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#get-java.lang.String-java.lang.Class-java.lang.Long-">DatabaseStorage</a></code></span></div>
<div class="block">Get entity by its Long ID. Internal method used by Transaction.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#get-java.lang.String-java.lang.Class-java.lang.Long-">get</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - entity class</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitName</code> - a unit name is typically the entity name + tenantId</dd>
<dd><code>cls</code> - entity class</dd>
<dd><code>id</code> - entity ID</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity bean or null</dd>
</dl>
</li>
</ul>
<a name="count-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>count</h4>
<pre>protected&nbsp;long&nbsp;count(java.lang.String&nbsp;unitName,
                     java.lang.Class&lt;?&gt;&nbsp;cls,
                     <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#count-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-">DatabaseStorage</a></code></span></div>
<div class="block">Count entites matching some criteria or all if no criteria was specified. Used internally by Transaction.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#count-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-">count</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitName</code> - a unit name is typically the entity name + tenantId</dd>
<dd><code>cls</code> - entity class</dd>
<dd><code>criteria</code> - filter criteria. Can be null</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of foudn entities</dd>
</dl>
</li>
</ul>
<a name="search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>protected&nbsp;&lt;T&gt;&nbsp;java.util.List&lt;T&gt;&nbsp;search(java.lang.String&nbsp;unitName,
                                       java.lang.Class&lt;T&gt;&nbsp;cls,
                                       <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria,
                                       java.util.List&lt;java.lang.String&gt;&nbsp;orderBy,
                                       java.lang.Integer&nbsp;limit)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-java.lang.Integer-">DatabaseStorage</a></code></span></div>
<div class="block">Query with a limit. Used internally by Transaction.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-java.lang.Integer-">search</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - entity class</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitName</code> - a unit name is typically the entity name + tenantId</dd>
<dd><code>cls</code> - entity class - make sure the exact concrete class is specified and not a superclass</dd>
<dd><code>criteria</code> - filter - can be null to get all entities</dd>
<dd><code>orderBy</code> - - list of SQL-like strings e.g. {"field1 ASC", "field2 DESC", "field3"}</dd>
<dd><code>limit</code> - mandatory limit</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of entity beans</dd>
</dl>
</li>
</ul>
<a name="search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>protected&nbsp;&lt;T&gt;&nbsp;<a href="../../../../com/px100systems/data/plugin/storage/EntityCursor.html" title="interface in com.px100systems.data.plugin.storage">EntityCursor</a>&lt;T&gt;&nbsp;search(java.lang.String&nbsp;unitName,
                                     java.lang.Class&lt;T&gt;&nbsp;cls,
                                     <a href="../../../../com/px100systems/data/core/Criteria.html" title="class in com.px100systems.data.core">Criteria</a>&nbsp;criteria,
                                     java.util.List&lt;java.lang.String&gt;&nbsp;orderBy)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-">DatabaseStorage</a></code></span></div>
<div class="block">Query without a limit. Used internally by Transaction.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#search-java.lang.String-java.lang.Class-com.px100systems.data.core.Criteria-java.util.List-">search</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - entity class</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitName</code> - a unit name is typically the entity name + tenantId</dd>
<dd><code>cls</code> - entity class - make sure the exact concrete class is specified and not a superclass</dd>
<dd><code>criteria</code> - filter - can be null to get all entities</dd>
<dd><code>orderBy</code> - - list of SQL-like strings e.g. {"field1 ASC", "field2 DESC", "field3"}</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a closeable cursor (always use try/finally to close)</dd>
</dl>
</li>
</ul>
<a name="save-java.util.List-java.util.List-java.util.List-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>protected&nbsp;java.util.List&lt;<a href="../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;&nbsp;save(java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;inserts,
                                                java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;updates,
                                                java.util.List&lt;<a href="../../../../com/px100systems/data/core/Delete.html" title="class in com.px100systems.data.core">Delete</a>&gt;&nbsp;deletes,
                                                java.util.List&lt;<a href="../../../../com/px100systems/data/core/InPlaceUpdate.html" title="class in com.px100systems.data.core">InPlaceUpdate</a>&lt;?&gt;&gt;&nbsp;inPlaceUpdates)
                                         throws <a href="../../../../com/px100systems/data/core/DataStorageException.html" title="class in com.px100systems.data.core">DataStorageException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#save-java.util.List-java.util.List-java.util.List-java.util.List-">DatabaseStorage</a></code></span></div>
<div class="block">Saving the changes transactionally. Used internally by Transaction.commit().</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#save-java.util.List-java.util.List-java.util.List-java.util.List-">save</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inserts</code> - a list of beans to insert</dd>
<dd><code>updates</code> - a list of changed beans to save</dd>
<dd><code>deletes</code> - a list of deletes - eitehr bean IDs or some Conditions to find and delete entities</dd>
<dd><code>inPlaceUpdates</code> - a list of callbacks to execute in-place updates via entry processors. Relevant to in-memory grids only.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of deleted entity descriptors: unit name, class, and ID. Since we already know inserts and updates (including in-pace ines),
   only deletes are not known until the actual execution since they can be Condition-based. All three kinds of operations need to be passed
   to persistance servers responsiblke for write-behind - immediately after the transaction.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DataStorageException.html" title="class in com.px100systems.data.core">DataStorageException</a></code></dd>
</dl>
</li>
</ul>
<a name="emergencyShutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>emergencyShutdown</h4>
<pre>public&nbsp;void&nbsp;emergencyShutdown()</pre>
</li>
</ul>
<a name="readBackupFile-java.io.File-com.px100systems.data.plugin.persistence.PersistenceProvider-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBackupFile</h4>
<pre>public static&nbsp;void&nbsp;readBackupFile(java.io.File&nbsp;f,
                                  <a href="../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a>&nbsp;persister)</pre>
<div class="block">Used by Restore utility. Transfers emergency shutdown data to the database backing the data grid.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>f</code> - one of backup files</dd>
<dd><code>persister</code> - persistence server</dd>
</dl>
</li>
</ul>
<a name="loader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loader</h4>
<pre>public&nbsp;<a href="../../../../com/px100systems/data/core/InMemoryDatabase.Loader.html" title="class in com.px100systems.data.core">InMemoryDatabase.Loader</a>&nbsp;loader()</pre>
</li>
</ul>
<a name="getPersistenceLog-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPersistenceLog</h4>
<pre>public&nbsp;<a href="../../../../com/px100systems/data/plugin/storage/EntityCursor.html" title="interface in com.px100systems.data.plugin.storage">EntityCursor</a>&lt;<a href="../../../../com/px100systems/data/plugin/persistence/PersistenceLogEntry.html" title="class in com.px100systems.data.plugin.persistence">PersistenceLogEntry</a>&gt;&nbsp;getPersistenceLog(java.lang.Long&nbsp;fromTime)</pre>
<div class="block">Used internally by pesisters.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fromTime</code> - start time</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>persistence log - records to persist.</dd>
</dl>
</li>
</ul>
<a name="getPersistenceRecord-java.lang.String-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPersistenceRecord</h4>
<pre>public&nbsp;<a href="../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a>&nbsp;getPersistenceRecord(java.lang.String&nbsp;unitName,
                                      java.lang.Long&nbsp;id)</pre>
</li>
</ul>
<a name="logSaveTime-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logSaveTime</h4>
<pre>public&nbsp;void&nbsp;logSaveTime(java.lang.Long&nbsp;time)</pre>
</li>
</ul>
<a name="purgePersistenceLog-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgePersistenceLog</h4>
<pre>public&nbsp;void&nbsp;purgePersistenceLog(int&nbsp;hoursBeforeLastSave)</pre>
<div class="block">Used internally by pesisters to cleanup (purge) the persistence log. Typically the cluster-wide log will keep N hours of data for
 slow persisters to catch up.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hoursBeforeLastSave</code> - start purge time - hours before the last/fresh log entry</dd>
</dl>
</li>
</ul>
<a name="persistenceStalled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persistenceStalled</h4>
<pre>protected&nbsp;boolean&nbsp;persistenceStalled()</pre>
</li>
</ul>
<a name="afterSave-java.util.Date-java.util.List-java.util.List-java.util.List-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterSave</h4>
<pre>protected&nbsp;void&nbsp;afterSave(java.util.Date&nbsp;now,
                         java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;allInserts,
                         java.util.List&lt;<a href="../../../../com/px100systems/data/core/StoredBean.html" title="class in com.px100systems.data.core">StoredBean</a>&gt;&nbsp;allUpdates,
                         java.util.List&lt;<a href="../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;&nbsp;deletes,
                         java.util.List&lt;<a href="../../../../com/px100systems/data/core/InPlaceUpdate.html" title="class in com.px100systems.data.core">InPlaceUpdate</a>&lt;?&gt;&gt;&nbsp;inPlaceUpdates)
                  throws <a href="../../../../com/px100systems/data/core/DataStorageException.html" title="class in com.px100systems.data.core">DataStorageException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#afterSave-java.util.Date-java.util.List-java.util.List-java.util.List-java.util.List-">DatabaseStorage</a></code></span></div>
<div class="block">Internal wite-behind implementation - relevant for data grids only, not traditional databases (Mongo).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html#afterSave-java.util.Date-java.util.List-java.util.List-java.util.List-java.util.List-">afterSave</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/px100systems/data/core/DatabaseStorage.html" title="class in com.px100systems.data.core">DatabaseStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>now</code> - current time</dd>
<dd><code>allInserts</code> - inserts</dd>
<dd><code>allUpdates</code> - updates</dd>
<dd><code>deletes</code> - deleted bean IDs</dd>
<dd><code>inPlaceUpdates</code> - in-place updates</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/px100systems/data/core/DataStorageException.html" title="class in com.px100systems.data.core">DataStorageException</a></code></dd>
</dl>
</li>
</ul>
<a name="createPersistenceLogEntry--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createPersistenceLogEntry</h4>
<pre>protected&nbsp;<a href="../../../../com/px100systems/data/plugin/persistence/PersistenceLogEntry.html" title="class in com.px100systems.data.plugin.persistence">PersistenceLogEntry</a>&nbsp;createPersistenceLogEntry()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/px100systems/data/core/Index.html" title="annotation in com.px100systems.data.core"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/px100systems/data/core/InMemoryDatabase.DataStorageEvents.html" title="interface in com.px100systems.data.core"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/px100systems/data/core/InMemoryDatabase.html" target="_top">Frames</a></li>
<li><a href="InMemoryDatabase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
