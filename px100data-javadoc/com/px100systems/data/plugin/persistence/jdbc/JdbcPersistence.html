<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Mon Aug 10 17:21:05 PDT 2015 -->
<title>JdbcPersistence</title>
<meta name="date" content="2015-08-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="JdbcPersistence";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/Storage.html" title="class in com.px100systems.data.plugin.persistence.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html" target="_top">Frames</a></li>
<li><a href="JdbcPersistence.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.px100systems.data.plugin.persistence.jdbc</div>
<h2 title="Class JdbcPersistence" class="title">Class JdbcPersistence</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.px100systems.data.plugin.persistence.jdbc.JdbcPersistence</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">JdbcPersistence</span>
extends java.lang.Object
implements <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></pre>
<div class="block">JDBC persistence provider (tested on MySQL and H2). It stores data in blocks to populate the data grid on startup.
 Two modes are supported: write-through and write-behind.<br>
 <br>
 Per-storage JDBC connection should be via (configured externally) DriverManagerDataSource:<br>
 <ul>
   <li> H2 URL: jdbc:h2:/absolute_path/filename -
     multiple DataSources to spread the data among several files: break by completely isolated entities which would never be saved in one transaction
   <li>MySQL: jdbc:mysql://localhost:3306/xyz_schema (supply the user and password as well) -
     one DataSource
 </ul>
 <br>
 A "storage" roughly corresponds to a relational database table.
 Storages store blobs in blocks and are configured for entities of different size that need to use blocks of different (optimal) size.
 Typically there are three storages of small, medium, and big block size.
 It is better to use the latter (big block storage) for development since bog blocks would hold the entire JSON records w/o splitting
 them into several blocks - useful to examine human-readable JSON records in the database.<br>
 lastSaved time is always saved in the first storage.<br>
 <br>
 <b>Performance tip:</b> since no complex relational structure is required, simple fast databases like MySQL work best - much faster than any NoSQL ones.<br>
 <br>
 See configuration parameter setters for details.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Alex Rogachevsky</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.px100systems.data.plugin.persistence.PersistenceProvider">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;com.px100systems.data.plugin.persistence.<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></h3>
<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>, <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.LoadCallback.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.LoadCallback</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#JdbcPersistence--">JdbcPersistence</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#compact--">compact</a></span>()</code>
<div class="block">Manually compacts a NoSQL database like MapDB.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#init--">init</a></span>()</code>
<div class="block">Used for cleaning the database before restoring it from dump files.<br>
 Reinitializes the database e.g.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.Long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#lastSaved--">lastSaved</a></span>()</code>
<div class="block">Time of last save.<br>
 SQL providers keep it in a separate table.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#loadByStorage-java.lang.String-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">loadByStorage</a></span>(java.lang.String&nbsp;storageName,
             <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.LoadCallback.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.LoadCallback</a>&nbsp;callback)</code>
<div class="block">Loads the entire named storage structure (SQL table or MapDB file).</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#loadEntities-java.util.List-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">loadEntities</a></span>(java.util.List&lt;java.lang.String&gt;&nbsp;entityNames,
            <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.LoadCallback.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.LoadCallback</a>&nbsp;callback)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,java.lang.Long&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#loadMaxIds--">loadMaxIds</a></span>()</code>
<div class="block">Returns max Ids per ID generator.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#open--">open</a></span>()</code>
<div class="block">Opens the DB connection - only relevant for NoSQL databases that should close all opened DB files they opened after the series of transactionalSaves()</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#setDatabaseDirectory-java.lang.String-">setDatabaseDirectory</a></span>(java.lang.String&nbsp;databaseDirectory)</code>
<div class="block">Used for optional directory clean on database reset (typically mutually exclusive with schema name - relevant for H2 only)</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#setSchemaName-java.lang.String-">setSchemaName</a></span>(java.lang.String&nbsp;schemaName)</code>
<div class="block">Optional schema DDL control (MySQL, PostgreSQL, Oracle, and similar heavy databases, not H2).</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#setStorages-java.util.List-">setStorages</a></span>(java.util.List&lt;<a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/Storage.html" title="class in com.px100systems.data.plugin.persistence.jdbc">Storage</a>&gt;&nbsp;storages)</code>
<div class="block">The list of storages (database tables).</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#setUnitStorageMapper-com.px100systems.data.plugin.persistence.UnitStorageMapper-">setUnitStorageMapper</a></span>(<a href="../../../../../../com/px100systems/data/plugin/persistence/UnitStorageMapper.html" title="interface in com.px100systems.data.plugin.persistence">UnitStorageMapper</a>&nbsp;unitStorageMapper)</code>
<div class="block">Maps unit (wildcarded entity name) to storage (database table).</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#sql-java.lang.String-java.util.List-">sql</a></span>(java.lang.String&nbsp;unitName,
   java.util.List&lt;java.lang.Long&gt;&nbsp;ids)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#storage--">storage</a></span>()</code>
<div class="block">The list of all storage structures (SQL table or MapDB file)</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.Collection-java.util.Collection-java.lang.Long-">transactionalSave</a></span>(<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>&nbsp;conn,
                 java.util.Collection&lt;<a href="../../../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a>&gt;&nbsp;insertsOrUpdates,
                 java.util.Collection&lt;<a href="../../../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;&nbsp;deletes,
                 java.lang.Long&nbsp;lastUpdateTime)</code>
<div class="block">Normal persistence.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.List-">transactionalSave</a></span>(<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>&nbsp;conn,
                 java.util.List&lt;<a href="../../../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a>&gt;&nbsp;inserts)</code>
<div class="block">Restoring database from the dump files.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html#unitStorage-java.lang.String-">unitStorage</a></span>(java.lang.String&nbsp;unitName)</code>
<div class="block">Returns unit's storage.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="JdbcPersistence--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JdbcPersistence</h4>
<pre>public&nbsp;JdbcPersistence()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setUnitStorageMapper-com.px100systems.data.plugin.persistence.UnitStorageMapper-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUnitStorageMapper</h4>
<pre>public&nbsp;void&nbsp;setUnitStorageMapper(<a href="../../../../../../com/px100systems/data/plugin/persistence/UnitStorageMapper.html" title="interface in com.px100systems.data.plugin.persistence">UnitStorageMapper</a>&nbsp;unitStorageMapper)</pre>
<div class="block">Maps unit (wildcarded entity name) to storage (database table). Typically all "x.y.z.*" package entities (classes) are assigned to some storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitStorageMapper</code> - unit to storage mappper</dd>
</dl>
</li>
</ul>
<a name="setStorages-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStorages</h4>
<pre>public&nbsp;void&nbsp;setStorages(java.util.List&lt;<a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/Storage.html" title="class in com.px100systems.data.plugin.persistence.jdbc">Storage</a>&gt;&nbsp;storages)</pre>
<div class="block">The list of storages (database tables). Automatically created during the schema initialization.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storages</code> - list of storage configs</dd>
</dl>
</li>
</ul>
<a name="setSchemaName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSchemaName</h4>
<pre>public&nbsp;void&nbsp;setSchemaName(java.lang.String&nbsp;schemaName)</pre>
<div class="block">Optional schema DDL control (MySQL, PostgreSQL, Oracle, and similar heavy databases, not H2).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>schemaName</code> - schema name</dd>
</dl>
</li>
</ul>
<a name="setDatabaseDirectory-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDatabaseDirectory</h4>
<pre>public&nbsp;void&nbsp;setDatabaseDirectory(java.lang.String&nbsp;databaseDirectory)</pre>
<div class="block">Used for optional directory clean on database reset (typically mutually exclusive with schema name - relevant for H2 only)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>databaseDirectory</code> - database directory for on-disk databases like H2</dd>
</dl>
</li>
</ul>
<a name="init--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#init--">PersistenceProvider</a></code></span></div>
<div class="block">Used for cleaning the database before restoring it from dump files.<br>
 Reinitializes the database e.g. deleting/creating the schema in MySQL or all files in the specified directory in H2 or NoSQL (MapDB).<br>
 Recreates storage structures.<br>
 Recreates the table for last save time (SQL only).<br>
 <br>
 SQL: simple DDL w/o indices. The table should have its own (auto-incremented or sequenced) PK instead of using entities IDs.<br></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#init--">init</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.Collection-java.util.Collection-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transactionalSave</h4>
<pre>public&nbsp;void&nbsp;transactionalSave(<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>&nbsp;conn,
                              java.util.Collection&lt;<a href="../../../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a>&gt;&nbsp;insertsOrUpdates,
                              java.util.Collection&lt;<a href="../../../../../../com/px100systems/data/core/EntityDescriptor.html" title="class in com.px100systems.data.core">EntityDescriptor</a>&gt;&nbsp;deletes,
                              java.lang.Long&nbsp;lastUpdateTime)
                       throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.Collection-java.util.Collection-java.lang.Long-">PersistenceProvider</a></code></span></div>
<div class="block">Normal persistence. Saves the time operation was performed in a special data structure (DB map or SQL table)<br>
 NoSQL: creates map if it does not exist (should be automatic).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.Collection-java.util.Collection-java.lang.Long-">transactionalSave</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conn</code> - - [NoSQL] connection</dd>
<dd><code>insertsOrUpdates</code> - list of records to save</dd>
<dd><code>deletes</code> - list of record IDs to delete</dd>
<dd><code>lastUpdateTime</code> - current time</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transactionalSave</h4>
<pre>public&nbsp;void&nbsp;transactionalSave(<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>&nbsp;conn,
                              java.util.List&lt;<a href="../../../../../../com/px100systems/data/core/RawRecord.html" title="class in com.px100systems.data.core">RawRecord</a>&gt;&nbsp;inserts)
                       throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.List-">PersistenceProvider</a></code></span></div>
<div class="block">Restoring database from the dump files.
 NoSQL: creates maps if it does not exist (should be automatic).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#transactionalSave-com.px100systems.data.plugin.persistence.PersistenceProvider.Connection-java.util.List-">transactionalSave</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conn</code> - - [NoSQL] connection</dd>
<dd><code>inserts</code> - - a list of reasonable size. It is the caller's responsibility to break long lists into smaller chunks.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadByStorage-java.lang.String-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadByStorage</h4>
<pre>public&nbsp;void&nbsp;loadByStorage(java.lang.String&nbsp;storageName,
                          <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.LoadCallback.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.LoadCallback</a>&nbsp;callback)
                   throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#loadByStorage-java.lang.String-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">PersistenceProvider</a></code></span></div>
<div class="block">Loads the entire named storage structure (SQL table or MapDB file).
 SQL providers should use JDBC Statement.setFetchSize() feature to read long tables.
 NoSQL providers (MapDB) apparently handle it automatically or with minimal tuning.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#loadByStorage-java.lang.String-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">loadByStorage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storageName</code> - storage name</dd>
<dd><code>callback</code> - how to load that storage record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadEntities-java.util.List-com.px100systems.data.plugin.persistence.PersistenceProvider.LoadCallback-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadEntities</h4>
<pre>public&nbsp;void&nbsp;loadEntities(java.util.List&lt;java.lang.String&gt;&nbsp;entityNames,
                         <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.LoadCallback.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.LoadCallback</a>&nbsp;callback)
                  throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadMaxIds--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadMaxIds</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,java.lang.Long&gt;&nbsp;loadMaxIds()
                                                          throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#loadMaxIds--">PersistenceProvider</a></code></span></div>
<div class="block">Returns max Ids per ID generator.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#loadMaxIds--">loadMaxIds</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="sql-java.lang.String-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sql</h4>
<pre>public&nbsp;java.lang.String&nbsp;sql(java.lang.String&nbsp;unitName,
                            java.util.List&lt;java.lang.Long&gt;&nbsp;ids)</pre>
</li>
</ul>
<a name="lastSaved--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastSaved</h4>
<pre>public&nbsp;java.lang.Long&nbsp;lastSaved()
                         throws <a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#lastSaved--">PersistenceProvider</a></code></span></div>
<div class="block">Time of last save.<br>
 SQL providers keep it in a separate table.
 NoSQL providers keep it in a one-entry map located in the most frequently used storage structure</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#lastSaved--">lastSaved</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProviderException.html" title="class in com.px100systems.data.plugin.persistence">PersistenceProviderException</a></code></dd>
</dl>
</li>
</ul>
<a name="storage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storage</h4>
<pre>public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;storage()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#storage--">PersistenceProvider</a></code></span></div>
<div class="block">The list of all storage structures (SQL table or MapDB file)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#storage--">storage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="unitStorage-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unitStorage</h4>
<pre>public&nbsp;java.lang.String&nbsp;unitStorage(java.lang.String&nbsp;unitName)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#unitStorage-java.lang.String-">PersistenceProvider</a></code></span></div>
<div class="block">Returns unit's storage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#unitStorage-java.lang.String-">unitStorage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unitName</code> - unit name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>storage name</dd>
</dl>
</li>
</ul>
<a name="compact--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compact</h4>
<pre>public&nbsp;void&nbsp;compact()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#compact--">PersistenceProvider</a></code></span></div>
<div class="block">Manually compacts a NoSQL database like MapDB. Quartz-scheduled by the server. Ignored by SQL providers.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#compact--">compact</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="open--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;<a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.Connection.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider.Connection</a>&nbsp;open()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#open--">PersistenceProvider</a></code></span></div>
<div class="block">Opens the DB connection - only relevant for NoSQL databases that should close all opened DB files they opened after the series of transactionalSaves()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html#open--">open</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/px100systems/data/plugin/persistence/PersistenceProvider.html" title="interface in com.px100systems.data.plugin.persistence">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../com/px100systems/data/plugin/persistence/jdbc/Storage.html" title="class in com.px100systems.data.plugin.persistence.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/px100systems/data/plugin/persistence/jdbc/JdbcPersistence.html" target="_top">Frames</a></li>
<li><a href="JdbcPersistence.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
